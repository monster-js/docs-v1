(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{84:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return c})),r.d(t,"metadata",(function(){return s})),r.d(t,"rightToc",(function(){return p})),r.d(t,"default",(function(){return i}));var n=r(2),o=(r(0),r(94));const c={id:"http.md",title:"Http",sidebar_label:"Http",slug:"/http"},s={unversionedId:"http.md",id:"http.md",isDocsHomePage:!1,title:"Http",description:"This package helps MonsterJS applications to communicate with a server using http protocol.",source:"@site/docs\\http.md",slug:"/http",permalink:"/docs/docs/http",editUrl:"https://github.com/monster-js/docs-v1/blob/master/docs/http.md",version:"current",sidebar_label:"Http",sidebar:"someSidebar",previous:{title:"Store",permalink:"/docs/docs/store"},next:{title:"Available pipes",permalink:"/docs/docs/available-pipes"}},p=[{value:"Installation",id:"installation",children:[]},{value:"Http interceptor",id:"http-interceptor",children:[{value:"Set request base url",id:"set-request-base-url",children:[]},{value:"Modify request config",id:"modify-request-config",children:[]},{value:"Set request header",id:"set-request-header",children:[]}]},{value:"Http interceptor module",id:"http-interceptor-module",children:[]},{value:"Http verbs",id:"http-verbs",children:[{value:"Get request",id:"get-request",children:[]},{value:"Post request",id:"post-request",children:[]},{value:"Put request",id:"put-request",children:[]},{value:"Patch request",id:"patch-request",children:[]},{value:"Delete request",id:"delete-request",children:[]}]}],a={rightToc:p};function i({components:e,...t}){return Object(o.b)("wrapper",Object(n.a)({},a,t,{components:e,mdxType:"MDXLayout"}),Object(o.b)("p",null,"This package helps MonsterJS applications to communicate with a server using http protocol.\nThis package is a wrapper of fetch api built for MonsterJS applications."),Object(o.b)("h2",{id:"installation"},"Installation"),Object(o.b)("p",null,"We can install the store to our project using npm or yarn."),Object(o.b)("p",null,"Ex."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"npm install @monster-js/http\n")),Object(o.b)("p",null,"or"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"yarn add @monster-js/http\n")),Object(o.b)("h2",{id:"http-interceptor"},"Http interceptor"),Object(o.b)("p",null,"Http interceptor is a way to intercept and modify the request config of every http request."),Object(o.b)("p",null,"The following code is an example of a working http interceptor codes but without functions yet."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-typescript"}),"import { Service } from '@monster-js/core';\nimport { BaseHttpInterceptor } from '@monster-js/http';\n\n@Service()\nexport class HttpInterceptor extends BaseHttpInterceptor {\n}\n")),Object(o.b)("h3",{id:"set-request-base-url"},"Set request base url"),Object(o.b)("p",null,"Setting a base url is helpful for us not to type again the base url of the server each time we make a request in the service.\nIt can also make our code cleaner since we do not need to type long urls on our services."),Object(o.b)("p",null,"Ex."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-typescript"}),"import { Service } from '@monster-js/core';\nimport { BaseHttpInterceptor } from '@monster-js/http';\n\n@Service()\nexport class HttpInterceptor extends BaseHttpInterceptor {\n    override baseUrl = 'http://localhost:4001/api/v1';\n}\n")),Object(o.b)("h3",{id:"modify-request-config"},"Modify request config"),Object(o.b)("p",null,"We can also modify the request config of fetch api before being sent to the server."),Object(o.b)("p",null,"Ex."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-typescript"}),"import { Service } from '@monster-js/core';\nimport { BaseHttpInterceptor } from '@monster-js/http';\n\n@Service()\nexport class HttpInterceptor extends BaseHttpInterceptor {\n    override modifyConfig(config: RequestInit): RequestInit {\n        config.body = {\n            greeting: 'Hello World!'\n        };\n        return config;\n    }\n}\n")),Object(o.b)("h3",{id:"set-request-header"},"Set request header"),Object(o.b)("p",null,"We can use the ",Object(o.b)("inlineCode",{parentName:"p"},"setHeader")," method provided by ",Object(o.b)("inlineCode",{parentName:"p"},"BaseHttpInterceptor")," to set a request header in http interceptor."),Object(o.b)("p",null,"Ex."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-typescript"}),"import { Service } from '@monster-js/core';\nimport { BaseHttpInterceptor } from '@monster-js/http';\n\n@Service()\nexport class HttpInterceptor extends BaseHttpInterceptor {\n    override modifyConfig(config: RequestInit): RequestInit {\n        this.setHeader(config, 'Authorization', `Bearer some-token`);\n        return config;\n    }\n}\n")),Object(o.b)("h2",{id:"http-interceptor-module"},"Http interceptor module"),Object(o.b)("p",null,"After we build the Http interceptor we need to create a module we can import to a module that needs the http interceptor."),Object(o.b)("p",null,"Ex."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-typescript"}),"import { Module, BaseModule } from '@monster-js/module';\nimport { HttpClient } from '@monster-js/http';\nimport { HttpInterceptor } from './http-interceptor.service';\n\n@Module({\n    exports: {\n        services: [\n            HttpInterceptor,\n            { service: HttpClient, config: HttpInterceptor }\n        ]\n    }\n})\nexport class HttpInterceptorModule extends BaseModule {}\n")),Object(o.b)("p",null,"Notice that we exported the ",Object(o.b)("inlineCode",{parentName:"p"},"HttpInterceptor")," and ",Object(o.b)("inlineCode",{parentName:"p"},"HttpClient")," as a service and pass the HttpInterceptor as a config for HttpClient."),Object(o.b)("h2",{id:"http-verbs"},"Http verbs"),Object(o.b)("p",null,"Once ",Object(o.b)("inlineCode",{parentName:"p"},"HttpClient")," is available in our module or component we can now start sending request using the different http verbs or methods.\nHttp supports different http verbs like GET, POST, PUT, PATCH, and DELETE."),Object(o.b)("h3",{id:"get-request"},"Get request"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-typescript"}),"import { Service } from '@monster-js/core';\nimport { HttpClient, ResponseInterface } from '@monster-js/http';\n\ninterface PostInterface {\n    id: number;\n    content: string;\n}\n\n@Service()\nexport class PostService {\n    constructor(private http: HttpClient) {}\n\n    getAll(): Promise<ResponseInterface<PostInterface[]>> {\n        return this.http.get<PostInterface[]>('/get-all');\n    }\n}\n")),Object(o.b)("h3",{id:"post-request"},"Post request"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-typescript"}),"import { Service } from '@monster-js/core';\nimport { HttpClient, ResponseInterface } from '@monster-js/http';\n\ninterface PostInterface {\n    id: number;\n    content: string;\n}\n\n@Service()\nexport class PostService {\n    constructor(private http: HttpClient) {}\n\n    create(post: PostInterface): Promise<ResponseInterface<PostInterface>> {\n        return this.http.post<PostInterface>('/create', post);\n    }\n}\n")),Object(o.b)("h3",{id:"put-request"},"Put request"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-typescript"}),"import { Service } from '@monster-js/core';\nimport { HttpClient, ResponseInterface } from '@monster-js/http';\n\ninterface PostInterface {\n    id: number;\n    content: string;\n}\n\n@Service()\nexport class PostService {\n    constructor(private http: HttpClient) {}\n\n    update(post: PostInterface): Promise<ResponseInterface<PostInterface>> {\n        return this.http.put<PostInterface>('/update/' + post.id, post);\n    }\n}\n")),Object(o.b)("h3",{id:"patch-request"},"Patch request"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-typescript"}),"import { Service } from '@monster-js/core';\nimport { HttpClient, ResponseInterface } from '@monster-js/http';\n\ninterface PostInterface {\n    id: number;\n    content: string;\n}\n\n@Service()\nexport class PostService {\n    constructor(private http: HttpClient) {}\n\n    update(id: number, content: string): Promise<ResponseInterface<PostInterface>> {\n        return this.http.patch<PostInterface>('/update/' + id, { content });\n    }\n}\n")),Object(o.b)("h3",{id:"delete-request"},"Delete request"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-typescript"}),"import { Service } from '@monster-js/core';\nimport { HttpClient, ResponseInterface } from '@monster-js/http';\n\n@Service()\nexport class PostService {\n    constructor(private http: HttpClient) {}\n\n    delete(id: number): Promise<ResponseInterface<void>> {\n        return this.http.delete<void>('/delete/' + id);\n    }\n}\n")))}i.isMDXComponent=!0},94:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return m}));var n=r(0),o=r.n(n);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=o.a.createContext({}),l=function(e){var t=o.a.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):p(p({},t),e)),r},u=function(e){var t=l(e.components);return o.a.createElement(i.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=o.a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,c=e.originalType,s=e.parentName,i=a(e,["components","mdxType","originalType","parentName"]),u=l(r),d=n,m=u["".concat(s,".").concat(d)]||u[d]||b[d]||c;return r?o.a.createElement(m,p(p({ref:t},i),{},{components:r})):o.a.createElement(m,p({ref:t},i))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var c=r.length,s=new Array(c);s[0]=d;var p={};for(var a in t)hasOwnProperty.call(t,a)&&(p[a]=t[a]);p.originalType=e,p.mdxType="string"==typeof e?e:n,s[1]=p;for(var i=2;i<c;i++)s[i]=r[i];return o.a.createElement.apply(null,s)}return o.a.createElement.apply(null,r)}d.displayName="MDXCreateElement"}}]);